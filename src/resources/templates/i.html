<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Form</title>
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet">
    <!-- font-awesome -->
    <link href="../assets/css/font-awesome.css" rel="stylesheet">
    <!-- Web Fonts -->
    <link href="../assets/css/fonts.css" rel="stylesheet">
    <!-- Animation Css -->
    <link href="../assets/css/animate.css" rel="stylesheet">
    <!-- Flaticon Css -->
    <link href="../assets/flaticon/construction_02/flaticon.css" rel="stylesheet">
    <!-- Owl Carousel -->
    <link href="../assets/css/owl.theme.default.css" rel="stylesheet">
    <link href="../assets/css/owl.carousel.css" rel="stylesheet">
    <!-- Style CSS 1 -->
    <link href="../assets/css/style.css" rel="stylesheet">
    <!-- Responsive CSS -->
    <link href="../assets/css/responsive.css" rel="stylesheet">
</head>
<body>
<div id="resultMessage"></div>
<form id="sendRequestForm" action="https://script.google.com/macros/s/AKfycbz745qupjvEjfavTV3_ferjali_32qmgRqfWMa2mq1u-N5YZ8qkrVffj-7wBKgHDuYr/exec" method="post" >
    <div class="row">
        <div class="col-lg-6 col-md-6 col-sm-6 col-12">
            <div class="const2_contect_form1">
                <div class="error-message" id="fullNameError"></div>
                <input type="text" name="fullName" id="fullName" placeholder="Full Name" >
            </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
            <div class="const2_contect_form1">
                <div class="error-message" id="emailError"></div>
                <input type="email" name="email" id="email" placeholder="Email" >
            </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
            <div class="const2_contect_form1">
                <div class="error-message" id="subjectError"></div>
                <input type="text" name="subject" id="subject" placeholder="Subject">
            </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
            <div class="const2_contect_form1">
                <div class="error-message" id="phoneError"></div>
                <input type="tel" name="phone" id="phone" placeholder="Phone">
            </div>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="const2_contect_form1">
                <div class="error-message" id="messageError"></div>
                <textarea name="message" id="message" placeholder="Message" ></textarea>
            </div>
        </div>
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <button type="button"  onclick="validateForm()" class="submitForm">Submit</button>
        </div>
    </div>
</form>

<script src="https://script.google.com/macros/s/AKfycbyg6xs2eZQPVzR2cV_nl9G2SAV3m-gBQgvNT1coXz0ep6ZAY9PcKjJg4xSkrNU1HUtQ/exec"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>

    function validateForm() {
        // Устанавливаем флаги валидации на начальное значение (false)
        var isFullNameValid = false;
        var isEmailValid = false;
        var isPhoneValid = false;
        var isSubjectValid = false;
        var isMessageValid = false;



        function setValidity(element, isValid, errorMessage) {
            var errorId = element.id + "Error";
            var errorElement = document.getElementById(errorId);

            if (isValid) {
                element.classList.remove("invalid");
                element.classList.add("valid");
                errorElement.innerHTML = "";
            } else {
                element.classList.remove("valid");
                element.classList.add("invalid");
                errorElement.innerHTML = errorMessage || "Поле обязательно для заполнения";
            }

            return isValid;
        }

        function isEmpty(value) {
            return value.trim() === "";
        }

        // Проводим валидацию для каждого поля
        isFullNameValid = setValidity(document.getElementById("fullName"), !isEmpty(document.getElementById("fullName").value) && /^[A-Za-zА-Яа-яЁё\s]+$/u.test(document.getElementById("fullName").value), "Please enter a valid fullName");
        isEmailValid = setValidity(document.getElementById("email"), !isEmpty(document.getElementById("email").value) && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(document.getElementById("email").value), "Please enter a valid email address");
        isPhoneValid = setValidity(document.getElementById("phone"), !isEmpty(document.getElementById("phone").value) && /^\+\d{12}$/.test(document.getElementById("phone").value), "Please enter a valid phone number");
        isSubjectValid = setValidity(document.getElementById("subject"), !isEmpty(document.getElementById("subject").value) && /^[^\s]+$/.test(document.getElementById("subject").value), "Please enter a valid subject");
        isMessageValid = setValidity(document.getElementById("message"), !isEmpty(document.getElementById("message").value) && /^[^\s]+$/.test(document.getElementById("message").value), "Please enter a valid message");


        /* isCourseValid = setValidity(document.getElementById("course"), !isEmpty(document.getElementById("course").value), "Please select a course");
         isEnglishLevelValid = setValidity(document.getElementById("englishLevel"), !isEmpty(document.getElementById("englishLevel").value), "Please select an English level");
 */
        // Отправка формы, если все поля прошли валидацию
        // Отправка формы, если все поля прошли валидацию
        if (isFullNameValid && isEmailValid && isPhoneValid && isSubjectValid && isMessageValid) {
            $.ajax({
                url: 'https://script.google.com/macros/s/AKfycbz745qupjvEjfavTV3_ferjali_32qmgRqfWMa2mq1u-N5YZ8qkrVffj-7wBKgHDuYr/exec',
                method: 'POST',
                dataType: 'json',
                data: $('#sendRequestForm').serialize(),
                success: function(response) {
                    // Выводим сообщение об успешной отправке формы на странице
                    $('#resultMessage').text('Your form has been submitted successfully!');
                },
                error: function(xhr, status, error) {
                    // Выводим сообщение об ошибке отправки формы на странице
                    $('#resultMessage').text('Something went wrong, please try again later.');
                }
            });
        }

    }
</script>

</body>
</html>
